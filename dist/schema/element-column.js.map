{"version":3,"sources":["../../src/schema/element-column.js"],"names":["ElementColumn","element","rawColumn","type","id","part","index","_type","_element","_rawColumn","_id","key","_part","_index","valueFrom","feature","isStatusElement","statusValue","formValues","get","exportValue","options","value","format","label","name","dataName","isPhotoElement","isVideoElement","isAudioElement","isSignatureElement","isRepeatableElement"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;;;IAEqBA,a;;;AACnB,+BAAyD;AAAA,QAA5CC,OAA4C,QAA5CA,OAA4C;AAAA,QAAnCC,SAAmC,QAAnCA,SAAmC;AAAA,QAAxBC,IAAwB,QAAxBA,IAAwB;AAAA,QAAlBC,EAAkB,QAAlBA,EAAkB;AAAA,QAAdC,IAAc,QAAdA,IAAc;AAAA,QAARC,KAAQ,QAARA,KAAQ;;AAAA;;AAAA,iDACvD,kBADuD;;AAGvD,UAAKC,KAAL,GAAaJ,IAAb;AACA,UAAKK,QAAL,GAAgBP,OAAhB;AACA,UAAKQ,UAAL,GAAkBP,SAAlB;AACA,UAAKQ,GAAL,GAAWN,MAAMH,QAAQU,GAAzB;AACA,UAAKC,KAAL,GAAaP,IAAb;AACA,UAAKQ,MAAL,GAAcP,KAAd;;AAEA,QAAID,IAAJ,EAAU;AACR,YAAKK,GAAL,IAAY,MAAML,IAAlB;AACD;AAZsD;AAaxD;;0BA0CDS,S,sBAAUC,O,EAAS;AACjB,QAAI,KAAKd,OAAL,CAAae,eAAjB,EAAkC;AAChC,aAAOD,QAAQE,WAAf;AACD;;AAED,WAAOF,QAAQG,UAAR,CAAmBC,GAAnB,CAAuB,KAAKlB,OAAL,CAAaU,GAApC,CAAP;AACD,G;;0BAEDS,W,wBAAYL,O,EAASM,O,EAAS;AAC5B,QAAMC,QAAQ,KAAKR,SAAL,CAAeC,OAAf,CAAd;;AAEA,QAAIO,KAAJ,EAAW;AACT,aAAOA,MAAMC,MAAN,YAAcR,gBAAd,EAAuBV,MAAM,KAAKA,IAAlC,IAA2CgB,OAA3C,EAAP;AACD;;AAED,WAAO,IAAP;AACD,G;;;;wBAxDU;AACT,aAAO,KAAKd,KAAZ;AACD;;;wBAEU;AACT,UAAI,KAAKF,IAAT,EAAe;AACb,eAAO,KAAKJ,OAAL,CAAauB,KAAb,GAAqB,IAArB,GAA4B,KAAKnB,IAAjC,GAAwC,GAA/C;AACD;;AAED,aAAO,KAAKJ,OAAL,CAAauB,KAApB;AACD;;;wBAEa;AACZ,aAAO,KAAKhB,QAAZ;AACD;;;wBAEe;AACd,aAAO,KAAKC,UAAZ;AACD;;;wBAEgB;AACf,UAAI,KAAKP,SAAT,EAAoB;AAClB,eAAO,KAAKA,SAAL,CAAeuB,IAAtB;AACD;;AAED,UAAI,KAAKpB,IAAT,EAAe;AACb,eAAO,KAAKJ,OAAL,CAAayB,QAAb,GAAwB,GAAxB,GAA8B,KAAKrB,IAA1C;AACD;;AAED,aAAO,KAAKJ,OAAL,CAAayB,QAApB;AACD;;;wBAEQ;AACP,aAAO,KAAKhB,GAAZ;AACD;;;wBAEU;AACT,aAAO,KAAKE,KAAZ;AACD;;;wBAoBgB;AACf,UAAI,KAAKX,OAAL,CAAa0B,cAAb,IACA,KAAK1B,OAAL,CAAa2B,cADb,IAEA,KAAK3B,OAAL,CAAa4B,cAFb,IAGA,KAAK5B,OAAL,CAAa6B,kBAHb,IAIA,KAAK7B,OAAL,CAAa8B,mBAJjB,EAIsC;AACpC,eAAO,KAAP;AACD;;AAED,aAAO,IAAP;AACD;;;;;;kBApFkB/B,a","file":"element-column.js","sourcesContent":["import Column from './column';\n\nexport default class ElementColumn extends Column {\n  constructor({element, rawColumn, type, id, part, index}) {\n    super();\n\n    this._type = type;\n    this._element = element;\n    this._rawColumn = rawColumn;\n    this._id = id || element.key;\n    this._part = part;\n    this._index = index;\n\n    if (part) {\n      this._id += '_' + part;\n    }\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  get name() {\n    if (this.part) {\n      return this.element.label + ' (' + this.part + ')';\n    }\n\n    return this.element.label;\n  }\n\n  get element() {\n    return this._element;\n  }\n\n  get rawColumn() {\n    return this._rawColumn;\n  }\n\n  get columnName() {\n    if (this.rawColumn) {\n      return this.rawColumn.name;\n    }\n\n    if (this.part) {\n      return this.element.dataName + '_' + this.part;\n    }\n\n    return this.element.dataName;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get part() {\n    return this._part;\n  }\n\n  valueFrom(feature) {\n    if (this.element.isStatusElement) {\n      return feature.statusValue;\n    }\n\n    return feature.formValues.get(this.element.key);\n  }\n\n  exportValue(feature, options) {\n    const value = this.valueFrom(feature);\n\n    if (value) {\n      return value.format({feature, part: this.part, ...options});\n    }\n\n    return null;\n  }\n\n  get isSortable() {\n    if (this.element.isPhotoElement ||\n        this.element.isVideoElement ||\n        this.element.isAudioElement ||\n        this.element.isSignatureElement ||\n        this.element.isRepeatableElement) {\n      return false;\n    }\n\n    return true;\n  }\n}\n"]}